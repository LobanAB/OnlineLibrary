# Парсер книг с сайта tululu.org

Программа скачивает книги с сайта [tululu.org](https://tululu.org/ "tululu.org") и сохраняет на диск. Книги с обложками и названием в файле.
Пример готового сайта - библиотеки: [GitHub Pages](https://lobanab.github.io/OnlineLibrary/pages/index1.html "Пример")

## Как установить

### Как скачать книги

- Нажать зеленую кнопку "Code"
- В выпадающем списке выбрать "Download ZIP"
- Скачать архив в папку на диске. Извлеките файлы из архива
- Откройте файл `index1.html` в папке `pages`
- Выберите нужную книгу и нажмите на ссылку `читать`. Книга для чтения откроется в новом окне

### Как скачать другие книги

- Скачайте код
- Для работы скачайте Python - https://www.python.org/
- Установите зависимости `pip install -r requirements.txt`
- Запустите программу. Например: `python parse_tululu_category.py -s 700 -df books -si True -st True -jp json` (Будет скачаны книги с 700 и до последней страницы, папка для скачивания `books`, для json будет создана отдельная папка `json`, картинки и сам текст книг скачаны не будут)

#### Аргументы

Аргументы являются не обязательными. По умолчанию скачаются все книги с 1 по 701 страницу. Текст и картинки. В корневой папке будет создано две папки `books` и `images` и файл `description.json`.

`-s`, `--start_page`, номер страницы с которой начать закачку, type=int, default=1

`-e`, `--end_page`, номер страницы до которой скачать, type=int, по умолчанию все страницы категории

`-df`, `--dest_folder`, путь к каталогу с результатами парсинга: картинкам, книгам, JSON., type=str, default=''

`-si`, `--skip_imgs`, не скачивать картинки, по умолчанию False

`-st`, `--skip_txt`, не скачивать книги, по умолчанию False

`-jp`, `--json_path`, путь к *.json файлу с результатами, type=str, default=''

#### Ошибки

Для id книг отсутствующих на сайте в терминале будет выведена ошибка. Например для id_2 - `Книга - id_2 отсутствует на сервере`.
На работу программы не влияет, остальные книги будут загружены.

#### Создание html-библиотеки

- Если нужно внесите изменения в html-шаблон `template.html`
- Запустите `python render_website.py`
- Готовые html страницы сформируются в папке `pages`

### Подробнее о работе программы

Программа `parse_tululu_category.py` берет данные по книгам из раздела ["Научная фантастика"](https://tululu.org/l55/1/ "Научная фантастика") онлайн библиотеки [tululu.org](https://tululu.org/ "tululu.org").
Текст книг скачивается как файл `.txt` в папку `books`.
Обложки книг скачиваются в папку `images`.
Формируется json файл с данными по каждой книге `description.json`.
```
{
    'header': Название книги,
    'image': Ссылка на файл обложки,
    'comments': Список комментариев,
    'author': Автор,
    'genre': Список жанров книги,
    'local_txt': Название файла с книгой на локальном диске,
    'local_image': Название файла с обложкой книги на локальном диске
}
```
Программа `render_website.py` подставляет данные из файла `description.json` в html-шаблон `template.html`.
Все книги разделяются на страницы. По 10 на страницу, в два столбца.
Готовые html-страницы добавляются в папку `pages`.

## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).